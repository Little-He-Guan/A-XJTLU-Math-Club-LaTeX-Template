% Copyright (C) 2021-2021 Guanyuming He. This file is licensed under the MIT license.

\ProvidesPackage{xjtlumaththm}[2021 by Guanyuming He]
\NeedsTeXFormat{LaTeX2e}

\RequirePackage{xjtlubase}
\RequirePackage[framemethod=TikZ]{mdframed}

\mdfsetup{nobreak=false}

% The following style is the example included in mdframed documentation, 
% with minor adjustments.
\newcounter{thmcnt}[section]
\newcounter{deficnt}[section]
\newcounter{lemmacnt}[section]
\newcounter{propcnt}[section]
\newcounter{corocnt}[section]
\newcounter{axiomcnt}[section]
\newcounter{examcnt}[section]

% #1 env name #2 cnt name #3 env title
\newcommand{\newmdthmenv}[3]{%
% #1 caption
\newenvironment{#1}[1][]{%
\stepcounter{#2}%
\ifstrempty{#1}%
{%
\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt]%
\node[anchor=east,rectangle,fill=blue!20]
{\strut #3~\thesection.\arabic{#2}};}
}%
}%
{
\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt]%
\node[anchor=east,rectangle,fill=blue!20]
{\strut #3~\thesection.\arabic{#2}:~##1};}
}
}
\mdfsetup{innertopmargin=0,linecolor=blue!20,linewidth=2pt,topline=true,frametitleaboveskip=-1em}
\begin{mdframed}[]\relax%
}%
{%
\end{mdframed}
}%
}

\newmdthmenv{theorem}{thmcnt}{Theorem}
\newmdthmenv{proposition}{procnt}{Proposition}
\newmdthmenv{corollary}{corocnt}{Corollary}
\newmdthmenv{lemma}{lemmacnt}{Lemma}
\newmdthmenv{definition}{deficnt}{Definition}
\newmdthmenv{axiom}{axiomcnt}{Axiom}
\newmdthmenv{example}{examcnt}{Example}

\endinput